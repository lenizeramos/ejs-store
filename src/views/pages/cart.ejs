<!DOCTYPE html>
<html lang="en">
<head>
    <%- include("../partials/head.ejs", { title: "Cart" , styles:"/css/cart.css" },) %>
    <script src="/js/cart.js" defer></script>
  </head>
  <body>
    <header><%- include("../partials/header.ejs", {page: "cart"}) %></header>
    <h1>Cart</h1>
    <% if (cart.products.length === 0) { %>
        <p>Your cart is empty. Let's add some items!!</p>
    <% } else { %>
    <ul>
        <% cart.products.forEach(cartItem => { %>
            <li>
                <h2><%= cartItem.product.title %></h2>
                <p><%= cartItem.product.description %></p>
                <p>Price: $<%= cartItem.product.price %></p>
                <p>Quantity: <%= cartItem.quantity %></p>
                <img src="<%= cartItem.product.image %>" alt="<%= cartItem.product.title %>">
                
                <form id="updateCartForm">
                    <label for="quantity">Quantity:</label>
                    <input type="number" name="quantity" value="<%= cartItem.quantity %>" min="1" required>
                    <input type="hidden" name="productId" value="<%= cartItem.product.id %>">
                    <button type="submit">Update</button>
                  </form>

                <form action="/cart/remove/<%= cartItem.product.id %>" method="DELETE"">
                    <button type="submit">Delete</button>
                </form>
            </li>
        <% }) %>
    </ul>
    <% } %>
</body>
</html>